<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swiper Grid</title>
    <!-- swiper, Toast ui grid 적용 -->
    <link rel="stylesheet" href="./node_modules/tui-grid/dist/tui-grid.min.css">
    <link rel="stylesheet" href="./node_modules/swiper/swiper-bundle.css">
    <link rel="stylesheet" href="./node_modules/tui-pagination/dist/tui-pagination.css">
    <script src="./node_modules/swiper/swiper-bundle.js"></script>
    <!-- pagination이 tui-grid보다 먼저 선언되어야 한다. -->
    <script src="./node_modules/tui-pagination/dist/tui-pagination.js"></script>
    <script src="./node_modules/tui-grid/dist/tui-grid.min.js"></script>

    <style>
        .tui-grid-cell-header {
            font-size: larger;
        }

        .tui-grid-cell-has-input {
            font-size: medium;

            text-align: center !important
        }

        h3 {
            text-align: center;
            background-color: rgba(81, 92, 230, 0.1);
        }
    </style>
</head>

<body>
    <div class="swiper-container">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <h3>예제 테이블</h3>
                <div style="margin: 5%;" id="grid"></div>
            </div>
            <div class="swiper-slide">
                <h3>2021 레이싱 게임 분기별 판매 현황</h3>
                <div style="margin: 5%;" id="cColumn">
                <div class="btn-wrapper">
                    <button style="margin-bottom: 1%;" id="appendBtn">데이터 추가</button>
                    <button style="margin-bottom: 1%;" id="prependBtn">앞에 데이터 추가</button>
                </div>
                </div>
            </div>
            <div class="swiper-slide">
                <h3>예제 테이블 3</h3>
                <div style="margin: 5%;" id="exampleGrid3"></div>
            </div>
        </div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>

    <script>
        // ---------- 예제1 tui grid -------------
        var gridData = [{
                // 데이터 생성 시 Row단위로 생성
                tests: 'test1',
                A: 8.2,
                B: 5.3,
                C: 6.5
            },
            {
                tests: 'test2',
                A: 4.2,
                B: 3.9,
                C: 5.3
            },
            {
                tests: 'test3',
                A: 2.2,
                B: 1.5,
                C: 3.2
            },
            {
                tests: 'test4',
                A: 1.2,
                B: 2.1,
                C: 12
            }
        ]

        // draw grid
        const grid = new tui.Grid({
            el: document.getElementById('grid'),
            data: gridData,
            // rowHeader로 번호나 체크박스 쉽게 달수있다.
            rowHeaders: ['rowNum','checkbox'],
            columns: [{
                    header: 'Test별', // display 되는 값
                    name: 'tests' // 해당 컬럼 이름.
                },
                {
                    header: 'A기체',
                    name: 'A'
                },
                {
                    header: 'B기체',
                    name: 'B'
                },
                {
                    header: 'C기체',
                    name: 'C'
                },
            ],
            header: {
                height: 50
            }
        });


        // ---------- 복합 컬럼 tui grid -------------

        var unit = ' milion copy'; // 단위지정(컴포넌트 아닙니다)
        function unitF(num) {
            return num + unit;
        }

        // complexColumns data
        var dataSet = {
            DrivingGame: [{
                    'game': 'Forza Horizon 5 (xboxGamePass제외)',
                    '1q': unitF(1300),
                    '2q': unitF(2000),
                    '3q': unitF(1490),
                    '4q': unitF(800),
                    'selectCell': '1',
                    'checkboxCell': ['1', '2', '3'],
                    'radioboxCell': '5'
                },
                {
                    'game': 'The Crew2',
                    '1q': unitF(800),
                    '2q': unitF(700),
                    '3q': unitF(650),
                    '4q': unitF(630),
                    'selectCell': '1',
                    'checkboxCell': '1',
                    'radioboxCell': '4'
                },
                {
                    'game': 'Need for speed Heat',
                    '1q': unitF(850),
                    '2q': unitF(870),
                    '3q': unitF(670),
                    '4q': unitF(400),
                    'selectCell': '3',
                    'checkboxCell': '1',
                    'radioboxCell': '2'
                },
                {
                    'game': 'Asseto Corsa',
                    '1q': unitF(450),
                    '2q': unitF(700),
                    '3q': unitF(1000),
                    '4q': unitF(1200),
                    'selectCell': '1',
                    'checkboxCell': '2',
                    'radioboxCell': '4'
                },
                {
                    'game': 'Project Cars2',
                    '1q': unitF(1100),
                    '2q': unitF(700),
                    '3q': unitF(630),
                    '4q': unitF(420),
                    'selectCell': '1',
                    'checkboxCell': '2',
                    'radioboxCell': '3'
                },
                {
                    'game': 'Dirt5',
                    '1q': unitF(670),
                    '2q': unitF(400),
                    '3q': unitF(340),
                    '4q': unitF(250),
                    'selectCell': '2',
                    'checkboxCell': ['3', '2'],
                    'radioboxCell': '1'
                }
            ]
        }

        // draw grid
        const complexColumns = new tui.Grid({
            el: document.getElementById('cColumn'), // 표가 생성 될 div
            data: dataSet.DrivingGame,
            rowHeaders: ['rowNum'],
            // page 넣는 옵션.
            pageOptions: {
                useClient: true, // 백엔드와 연동 없이 돌릴 시 적용 시켜야 하는 옵션
                perPage: 8  // row가 한 페이지에 8까지 표시됨.
            },
            // 하위 컬럼.
            columns: [{
                    header: 'Games(클릭 시 이동)',
                    name: 'game'
                },
                {
                    header: '1분기',
                    name: '1q'
                },
                {
                    header: '2분기',
                    name: '2q'
                },
                {
                    header: '3분기',
                    name: '3q'
                },
                {
                    header: '4분기',
                    name: '4q'
                },
                {
                    header: 'DLC유무',
                    name: 'selectCell',
                    formatter: 'listItemText',
                    editor: {
                        type: 'select',
                        options: {
                            listItems: [{
                                    text: '유',
                                    value: '1',
                                },
                                {
                                    text: '무',
                                    value: '2',
                                },
                                {
                                    text: '차후 추가 예정',
                                    value: '3'
                                }
                            ]
                        }
                    }
                },
                {
                    header: '레이싱 장르',
                    name: 'checkboxCell',
                    formatter: 'listItemText',
                    editor: {
                        type: 'checkbox',
                        options: {
                            listItems: [{
                                    text: '오픈월드 레이싱',
                                    value: '1',
                                },
                                {
                                    text: '심레이싱',
                                    value: '2',
                                },
                                {
                                    text: '오프로드 레이싱',
                                    value: '3'
                                }
                            ]
                        }
                    }
                },
                {
                    header: '평점',
                    name: 'radioboxCell',
                    copyOptions: {
                        useListItemText: true
                    },
                    formatter: 'listItemText',
                    editor: {
                        type: 'radio',
                        options: {
                            listItems: [{
                                    text: '★☆☆☆☆',
                                    value: '1'
                                },
                                {
                                    text: '★★☆☆☆',
                                    value: '2'
                                },
                                {
                                    text: '★★★☆☆',
                                    value: '3'
                                },
                                {
                                    text: '★★★★☆',
                                    value: '4'
                                },
                                {
                                    text: '★★★★★',
                                    value: '5'
                                },

                            ]
                        }
                    },
                }
            ],
            // header.complexColumns로 복합컬럼 정의. 트리구조로 만들 수 있다.
            header: {
                height: 100,
                complexColumns: [{
                        header: '상반기',
                        name: 'firstHalf',
                        childNames: ['1q', '2q'] // 하위컬럼 지정.
                    },
                    {
                        header: '하반기',
                        name: 'secondHalf',
                        childNames: ['3q', '4q']
                    },
                    {
                        header: '2021',
                        name: 'year',
                        childNames: ['firstHalf', 'secondHalf']
                    }
                ]
            },
        });

        const appendBtn = document.getElementById('appendBtn');
        const prependBtn = document.getElementById('prependBtn');

        const appendedData = {
            game: 'game',
            '1q': '1분기 데이터',
            '2q': '2분기 데이터',
            '3q': '3분기 데이터',
            '4q': '4분기 데이터',
            selectCell: '1',
            checkboxCell: '1',
            radioboxCell: '1'
        };

        appendBtn.addEventListener('click', () => {
            complexColumns.appendRow(appendedData);
        });

        prependBtn.addEventListener('click', () => {
            complexColumns.prependRow(appendedData);
        });

        // ######## 셀 클릭 시 링크 띄우기 #########
        complexColumns.on('click', (ev) => {
            // 링크 주소 모음
            var links = [
                'https://namu.wiki/w/%ED%8F%AC%EB%A5%B4%EC%9E%90%20%ED%98%B8%EB%9D%BC%EC%9D%B4%EC%A6%8C%205',
                'https://namu.wiki/w/%EB%8D%94%20%ED%81%AC%EB%A3%A8%202?from=%EB%8D%94%ED%81%AC%EB%A3%A82',
                'https://namu.wiki/w/%EB%8B%88%EB%93%9C%20%ED%8F%AC%20%EC%8A%A4%ED%94%BC%EB%93%9C:%20%ED%9E%88%ED%8A%B8?from=%EB%8B%88%EB%93%9C%ED%8F%AC%EC%8A%A4%ED%94%BC%EB%93%9C%20%ED%9E%88%ED%8A%B8',
                'https://namu.wiki/w/%EC%95%84%EC%84%B8%ED%86%A0%20%EC%BD%94%EB%A5%B4%EC%82%AC',
                'https://namu.wiki/w/Project%20CARS%202',
                'https://namu.wiki/w/DiRT%205'
            ];
            
            // 셀 클릭 시 몇번째 row에 column이름이 game인 셀이면 link를 띄운다.
            for(var i =0; i<links.length; i++) {
                if(ev.rowKey === i && ev.columnName === 'game'){
                    window.open(links[i]);
                }
            }
        });

        // -------- exampleGrid3 Data
        const gridData3 = [{
                name: 'Beautiful Lies',
                artist: 'Birdy',
                release: '2016.03.26',
                type: 'Deluxe',
                genre: 'Pop'
            },
            {
                name: 'X',
                artist: 'Ed Sheeran',
                release: '2014.06.24',
                type: 'Deluxe',
                genre: 'Pop',
                _attributes: {
                    disabled: true // row 비활성화
                }
            },
            {
                name: 'Moves Like Jagger',
                release: '2011.08.08',
                artist: 'Maroon5',
                type: 'Single',
                genre: 'Pop,Rock',
                _attributes: {
                    checkDisabled: true // checkbox 비활성화
                }
            },
            {
                name: 'A Head Full Of Dreams',
                artist: 'Coldplay',
                release: '2015.12.04',
                type: 'Deluxe',
                genre: 'Rock',
                _attributes: {
                    checked: true, // 체크박스 체크
                    /* // background-color관련 기능 작동안함
                    classNames: {
                        // Add class name on a row
                        row: ['red']
                    } */
                }
            },
            {
                name: 19,
                artist: 'Adele',
                release: '2008.01.27',
                type: 'EP',
                genre: 'Pop,R&B',
                _attributes: {
                    rowSpan: {
                        // rowSpan 밑에 뭘 적든 이 데이터에 적힌 값으로 marge된다.
                        artist: 3,
                        genre: 2
                    }
                }
            },
            {
                name: 21,
                artist: 'rowSpan되서 안보임',
                release: '2011.01.21',
                type: 'Deluxe',
                genre: 'rowSpan되서 안보임'
            },
            {
                name: 25,
                artist: 'rowSpan되서 안보임',
                release: '2015.11.20',
                type: 'EP',
                genre: 'Pop',
                _attributes: {
                    /* // background-color관련 기능 작동안함
                    classNames: {
                        // Add class name on each columns
                        column: {
                            type: ['blue'],
                            genre: ['blue']
                        }
                    } */
                }
            }
        ];

        // ---------- exampleGrid 3 draw -----------
        const exampleGrid3 = new tui.Grid({
            el: document.getElementById('exampleGrid3'),
            data: gridData3,
            scrollX: false,
            scrollY: false,
            // rowHeader로 번호나 체크박스를 지정해줄 수 있다.
            // rowHeaders: ['rowNum','checkbox'] 이렇게 넣으면 기본값으로 쉽게 들어간다.
            // 추가 옵션을 적용 시킬 시
            rowHeaders: [{
                    type: 'rowNum',
                    width: 50,
                    align: 'center',
                    valign: 'middle'
                },
                {
                    type: 'checkbox'
                }
            ],
            columns: [{
                    header: 'Name',
                    name: 'name',
                    // // background-color관련 기능 작동안함
                    // // data 타입이 sting이 아닐 시 background-color가 red로 설정됨.
                    // validation: {
                    //     datatype: 'string'
                    // }
                },
                {
                    header: 'Artist',
                    name: 'artist'
                },
                {
                    header: 'Type',
                    name: 'type'
                },
                {
                    header: 'Release',
                    name: 'release'
                },
                {
                    header: 'Genre',
                    name: 'genre'
                },
                {
                    header: 'linkButton',
                    name: 'linkBt'
                }
            ]
        });

        // checkbox 로 이벤트 받을 때.
        // 첫번째 인자는 타겟이벤트 이름.
        // 두번째 인자는 등록할 핸들러.
        exampleGrid3.on('check', (ev) => {
            alert(`check: ${ev.rowKey}`);
        });

        exampleGrid3.on('uncheck', (ev) => {
            alert(`uncheck: ${ev.rowKey}`);
        });



        // ---------- swiper 적용 -------------
        var swiper = new Swiper('.swiper-container', {
            // 좌우 버튼
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev'
            },
            allowTouchMove: false // 터치 무브 금지. 이거 안걸면 grid기능 사용 안됩니다.
        });
    </script>
</body>

</html>